<%
  show_arrows = local_assigns.fetch(:show_arrows, false)

  case context
  when :desktop, :modal
    wrapper_classes = "flex flex-col items-center content-center"
    container_classes = "space-y-2"
    arrow_classes = "p-1 rounded-full transition-all duration-200"
    arrow_icon_classes = "w-5 h-5 text-muted"
  when :mobile
    wrapper_classes = "flex space-x-3 overflow-x-auto pb-2"
    container_classes = ""
    show_arrows = false
  end
%>
<% if context == :mobile %>
  <div class="<%= wrapper_classes %>">
    <% images.each_with_index do |image_data, index| %>
      <%= render "products/thumbnail_button",
          image_data: image_data,
          index: index,
          context: context,
          product: product,
          component: component %>
    <% end %>
  </div>
<% else %>
  <div class="<%= wrapper_classes %>">
    <!-- Previous Arrow -->
    <% if show_arrows %>
      <button type="button"
              class="mb-2 <%= arrow_classes %>"
              data-action="click->products--gallery-thumbnails#scrollThumbnailsUp"
        data-products--gallery-thumbnails-target="upArrow">
        <%= render UI::IconComponent.new(name: :chevron_up, css_class: arrow_icon_classes) %>
      </button>
    <% end %>
    <!-- Thumbnail Container -->
    <div class="h-[calc(theme(--thumb-size)*4+theme(--thumb-gap)*3)] overflow-hidden"
         data-products--gallery-thumbnails-target="thumbnailContainer">
      <div class="<%= container_classes %>">
        <% images.each_with_index do |image_data, index| %>
          <%= render "products/thumbnail_button",
              image_data: image_data,
              index: index,
              context: context,
              product: product,
              component: component %>
        <% end %>
      </div>
    </div>
    <!-- Next Arrow -->
    <% if show_arrows %>
      <button type="button"
              class="mt-2 <%= arrow_classes %>"
              data-action="click->products--gallery-thumbnails#scrollThumbnailsDown"
        data-products--gallery-thumbnails-target="downArrow">
        <%= render UI::IconComponent.new(name: :chevron_down, css_class: arrow_icon_classes) %>
      </button>
    <% end %>
  </div>
<% end %>
