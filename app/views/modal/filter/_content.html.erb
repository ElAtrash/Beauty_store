<div class="h-full flex flex-col">
  <div class="flex-1 overflow-y-auto">
    <div class="space-y-3">
      <!-- In Stock Toggle -->
      <% if filter_form.filter_available?(:in_stock) %>
        <div class="filter-section">
          <div class="flex items-center justify-between">
            <label for="in_stock" class="text-base font-medium">In Stock</label>
            <div class="filter-toggle-switch">
              <input type="checkbox"
                     id="in_stock"
                     name="filters[in_stock]"
                     <%= 'checked' if component.in_stock_selected? %>
                     data-action="change-><%= component.controller_name %>#updateFilter"
                     data-filter-type="in_stock"
                     class="sr-only">
              <label for="in_stock" class="toggle-label">
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        </div>
      <% end %>

      <!-- Price Range -->
      <% if filter_form.filter_available?(:price_range) %>
        <div class="filter-section">
          <div class="filter-range-container"
               data-<%= component.controller_name %>-target="priceRange"
               data-min="<%= component.price_range[:min] %>"
               data-max="<%= component.price_range[:max] %>"
               data-current-min="<%= component.current_min_price %>"
               data-current-max="<%= component.current_max_price %>">

            <div class="range-slider-container mb-4">
              <div class="range-slider" data-<%= component.controller_name %>-target="slider">
                <div class="range-track"></div>
                <div class="range-fill" data-<%= component.controller_name %>-target="rangeFill"></div>
                <input type="range"
                       class="range-input range-min"
                       min="<%= component.price_range[:min] %>"
                       max="<%= component.price_range[:max] %>"
                       value="<%= component.current_min_price %>"
                       data-<%= component.controller_name %>-target="rangeMin"
                       data-action="input-><%= component.controller_name %>#updatePriceRange">
                <input type="range"
                       class="range-input range-max"
                       min="<%= component.price_range[:min] %>"
                       max="<%= component.price_range[:max] %>"
                       value="<%= component.current_max_price %>"
                       data-<%= component.controller_name %>-target="rangeMax"
                       data-action="input-><%= component.controller_name %>#updatePriceRange">
              </div>
            </div>
            <div class="flex items-center justify-between text-sm text-muted">
              <span data-<%= component.controller_name %>-target="minPriceDisplay">$<%= component.current_min_price %></span>
              <span data-<%= component.controller_name %>-target="maxPriceDisplay">$<%= component.current_max_price %></span>
            </div>
          </div>
        </div>
      <% end %>

      <!-- Product Type -->
      <%= render Filters::FilterSectionComponent.new(
            section_id: "product-type",
            title: "Product Type",
            options: component.product_type_options,
            filter_type: "product_types",
            selected_values: component.selected_values_for("product_types"),
            controller_name: component.controller_name
          ) if filter_form.filter_available?(:product_types) %>

      <!-- Brands (only show if not in brand context) -->
      <%= render Filters::FilterSectionComponent.new(
            section_id: "brands",
            title: "Brands",
            options: component.brand_options,
            filter_type: "brands",
            selected_values: component.selected_values_for("brands"),
            controller_name: component.controller_name
          ) if filter_form.filter_available?(:brands) %>

      <!-- Colors -->
      <%= render Filters::FilterSectionComponent.new(
            section_id: "colors",
            title: "Colors",
            options: component.available_colors,
            filter_type: "colors",
            selected_values: component.selected_values_for("colors"),
            controller_name: component.controller_name
          ) if filter_form.filter_available?(:colors) %>

      <!-- Sizes -->
      <%= render Filters::FilterSectionComponent.new(
            section_id: "sizes",
            title: "Sizes",
            options: component.available_sizes,
            filter_type: "sizes",
            selected_values: component.selected_values_for("sizes"),
            controller_name: component.controller_name
          ) if filter_form.filter_available?(:sizes) %>

      <!-- Skin Type -->
      <%= render Filters::FilterSectionComponent.new(
            section_id: "skin-type",
            title: "Skin Type",
            options: component.skin_type_options,
            filter_type: "skin_types",
            selected_values: component.selected_values_for("skin_types"),
            controller_name: component.controller_name
          ) if filter_form.filter_available?(:skin_types) %>
    </div>
  </div>

  <!-- Footer with buttons -->
  <div class="p-6 pt-8">
    <div class="flex gap-3">
      <button type="button"
              class="btn-secondary flex-1 disabled:opacity-50 disabled:cursor-not-allowed"
              data-<%= component.controller_name %>-target="resetButton"
              data-action="click-><%= component.controller_name %>#resetFilters">
        Reset
      </button>
      <button type="button"
              class="flex-1 px-4 py-3 bg-interactive-primary text-white font-medium hover:bg-interactive-secondary transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
              data-action="click-><%= component.controller_name %>#applyFilters">
        Apply Filters
      </button>
    </div>
  </div>
</div>
