<nav class="alphabet-navigation" aria-label="Browse brands by letter" role="navigation">
  <div class="container mx-auto px-4">
    <div class="flex flex-wrap justify-center gap-1 py-4" role="list">
      <% navigation_items.each do |item| %>
        <% if item[:count] > 0 %>
          <%= link_to item[:url],
              class: letter_class(item),
              role: "listitem",
              tabindex: "0",
              data: {
                turbo_frame: "brands-content",
                brands_letter_value: item[:letter].downcase,
                action: "keydown.enter->brands#handleKeyboardNavigation keydown.space->brands#handleKeyboardNavigation",
                brands_letter_param: item[:letter]
              },
              "aria-label": "Browse brands starting with #{item[:letter]} (#{item[:count]} brands)",
              "aria-current": item[:active] ? "page" : nil do %>
            <span aria-hidden="true"><%= item[:letter] %></span>
            <span class="brand-count" aria-label="#{item[:count]} brands"><%= item[:count] %></span>
          <% end %>
        <% else %>
          <span class="<%= letter_class(item) %>"
                role="listitem"
                aria-label="No brands starting with <%= item[:letter] %>"
                aria-disabled="true">
            <span aria-hidden="true"><%= item[:letter] %></span>
            <span class="brand-count" aria-label="0 brands">0</span>
          </span>
        <% end %>
      <% end %>
    </div>

    <!-- Search Input -->
    <div class="flex justify-center pb-6">
      <%= form_with url: brands_path, method: :get, local: true,
          data: {
            turbo_frame: "brands-content"
          },
          class: "relative",
          style: "margin-right: 4px;" do |form| %>
        <%= form.text_field :search,
            placeholder: "Find brands",
            value: params[:search],
            class: "w-80 py-3 px-4 pr-12 text-gray-700 bg-gray-50 border-0 rounded-lg hover:bg-white focus:outline-none focus:ring-0 focus:bg-white transition-all duration-200 placeholder-gray-400",
            data: {
              action: "input->brands#handleSearchInput",
              brands_target: "searchInput"
            },
            "aria-label": "Search for brands",
            role: "searchbox",
            autocomplete: "off" %>
        <div class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400" aria-hidden="true">
          <%= render IconComponent.new(name: :search, class: "w-5 h-5") %>
        </div>
      <% end %>
    </div>
  </div>
</nav>
