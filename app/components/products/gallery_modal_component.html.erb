<div class="fixed inset-0 hidden bg-white z-[9999]"
     data-products--gallery-target="zoomModal"
     data-action="click->products--gallery#closeZoom">
  <div class="flex h-full bg-white" data-action="click->products--gallery#stopPropagation">
    <!-- Left Sidebar - Product Page Style Thumbnails -->
    <div class="gallery-modal-sidebar">
      <% if gallery_images.size > 1 %>
        <%= render "products/thumbnail_list",
            images: gallery_images,
            context: :modal,
            product: product,
            component: self,
            show_arrows: show_thumbnail_arrows?,
            container_height: thumbnail_container_height %>
      <% end %>
    </div>

    <!-- Main Content - Scrollable Images -->
    <div class="flex-1 overflow-y-auto relative">
      <!-- Close Button -->
      <button type="button"
              class="absolute top-6 right-6 z-50 text-black hover:text-orange-600 transition-colors duration-200 p-2"
              data-action="click->products--gallery#closeZoom">
        <%= render IconComponent.new(name: :close, class: "w-8 h-8") %>
      </button>

      <!-- Images List -->
      <div class="gallery-modal-content">
        <% gallery_images.each_with_index do |image_data, index| %>
          <div class="scroll-mt-32"
               id="zoom-image-<%= index %>"
               data-products--gallery-target="zoomImageCard">

            <!-- Product Info -->
            <% if index == 0 %>
              <div class="mb-8 text-left">
                <h1 class="text-3xl font-bold text-gray-900 mb-2"><%= product.name %></h1>
                <% if product.subtitle.present? %>
                  <p class="text-lg text-gray-600"><%= product.subtitle %></p>
                <% end %>
              </div>
            <% end %>

            <% if image_data.attached? %>
              <img src="<%= image_url(image_data.attachment, size: :large) %>"
                   alt="<%= image_data.safe_alt %>"
                   class="w-full h-auto object-contain"
                   loading="lazy">
            <% else %>
              <img src="<%= placeholder_url %>"
                   alt="<%= image_data.safe_alt %>"
                   class="w-full h-auto object-contain opacity-50"
                   loading="lazy">
            <% end %>
          </div>
        <% end %>
        <div class="h-16"></div>
      </div>
    </div>
  </div>
</div>
